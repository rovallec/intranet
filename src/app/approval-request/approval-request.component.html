<div class="row col-md-12">
  <div class="col col-md-3 justify-content-between d-flex body-left" style="padding-bottom: 178px; margin-left: 0px; margin-right: 0px;">
    <div class="col col-md-12 justify-self-center">
      <div class="row col-md-12 justify-content-center" style="margin-top: 25px;">
        <img style="margin-left:5%; max-width: 200px; max-height: 200px; min-width: 100px; min-height: 100px; align-self: center;"
          src="./assets/user-profile-male-logo.jpg" height="160px" width="150" class="rounded-circle">
      </div>
      <div class="row col-md-12" style="margin-top: 25px;">
        <label>
          Name:
        </label>
        <input type="text" class="form-control" [(ngModel)]="workingEmployee.name">
      </div>
      <div class="row col-md-12">
        <label>
          Account:
        </label>
        <input type="text" class="form-control" [(ngModel)]="workingEmployee.account">
      </div>
      <div class="row col-md-12" style="margin-top: 25px;">
        <label>
          Client ID:
        </label>
        <input type="text" class="form-control" [(ngModel)]="workingEmployee.client_id">
      </div>
      <div class="row col-md-12" style="margin-top: 25px;">
        <label>
          Nearsol ID:
        </label>
        <input type="text" class="form-control" [(ngModel)]="workingEmployee.nearsol_id">
      </div>
      <div class="row col-md-12" style="margin-top: 25px;">
        <label>
          Supervisor:
        </label>
        <input type="text" class="form-control" [(ngModel)]="workingEmployee.reporter">
      </div>
    </div>
  </div>
  <!--  NAV TABS -->
  <div class="col-md-9" style="margin:0%; padding-right: 0%; height:60vh;">
    <table width=90% style="margin-left: 5%;margin-top:50px">
      <tr style="border-bottom: solid 4px #e3f2fd;">
        <td colspan="2" style="padding-top:30px" *ngIf="!addProc && !viewRecProd">
          <nav width=100% style="border-top: 4px solid #e3f2fd;">
            <div class="nav nav-tabs" id="nav-tab" role="tablist" width=100% style="padding-top:15px">
              <a class="nav-item nav-link active" id="nav-attendence-tab" data-toggle="tab" href="#nav-attendence"
                role="tab" aria-controls="nav-attendence" aria-selected="true">
                Attendance
              </a>
              <a class="nav-item nav-link" id="nav-leavs-tab" data-toggle="tab" href="#nav-leavs" role="tab"
                aria-controls="nav-leavs" aria-selected="false">
                Leaves
              </a>
              <a class="nav-item nav-link" id="nav-vac-tab" data-toggle="tab" href="#nav-vac" role="tab"
                aria-controls="nav-vac" aria-selected="false">
                Vacations
              </a>
              <a class="nav-item nav-link" id="nav-justifications-tab" data-toggle="tab" href="#nav-justifications"
                role="tab" aria-controls="nav-justifications" aria-selected="false">
                Justifications
              </a>
              <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab"
                aria-controls="nav-contact" aria-selected="false">
                Parking
              </a>
              <a class="nav-item nav-link" id="nav-emergency-tab" data-toggle="tab" href="#nav-emergency" role="tab"
                aria-controls="nav-emergency" aria-selected="false">
                Advances
              </a>
              <a class="nav-item nav-link" id="nav-medical-tab" data-toggle="tab" href="#nav-medical" role="tab"
                aria-controls="nav-medical" aria-selected="false">
                Transport
              </a>
            </div>
          </nav>
        </td>
      </tr>
    </table>
  <!-- cuerpo de la pÃ¡gina. -->
    <div class="tab-content" id="nav-tabContent" style="width: 90%; margin-left: 55px;">
      <!-- Attendences -->
      <div class="tab-pane fade show active" id="nav-attendence" role="tabpanel" aria-labelledby="nav-attendence-tab">
        <div class="form-row col-dm-12">
          <label style="font-size: 20px; font-weight: bold; margin-left:50%;margin-top: 10px;">ATTENDANCE</label>
        </div>
        <div class="form-row col-md-12">
          <div class="form-group col-dm-6">
            <div class="form-row col-md-12">
              <div class="form-group col-md-6">
                <label>Date:</label>
                <input type="date" class="form-control" (change)="getAttendences($event.target.value)" [value]="todayDate">
              </div>
            </div>
            <div class="form-row col-md-12">
              <table style="width:98%; padding: 1%;" class="table table-striped table-hover">
                <thead>
                  <th>DATE</th>
                  <th>ROSTER</th>
                  <th>ATTENDED</th>
                  <th>BALANCE</th>
                  <th>IGSS</th>
                  <th>EXCEPTIONS</th>
                </thead>
                <tbody>
                  <tr *ngFor="let att of showAttendences" style="cursor:pointer" (click)="addJustificationatt(att)"
                    class="selectable" [ngClass]="{'table-danger': (att.balance === 'NS' || att.balance === 'JANP' || att.balance === 'SUSPENSION'),
                                                  'table-warning':att.balance < 0, 'table-success': att.balance > 0,
                                                  'table-info':att.balance === 'OFF' || att.balance === 'VAC',
                                                  'table-light':att.balance === 'HLD' || att.balance === 0}">
                    <td>{{att.date}}</td>
                    <td>{{att.scheduled}}</td>
                    <td>{{att.worked_time}}</td>
                    <td>{{att.balance}}</td>
                    <td>{{att.igss}}</td>
                    <td>{{att.tk_exp}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
      <!-- Leaves -->
      <div class="tab-pane fade" id="nav-leavs" role="tabpanel" aria-labelledby="nav-leavs-tab">
        <div class="form-row col-md-12">
          <div class="form-group col-md-6" style="border-left:solid 4px #e3f2fd;">
            <div class="form-row col-md-12">
              <div class="form-group col-md-1"></div>
              <div class="form-group col-md-10" style="border-bottom: solid 4px #e3f2fd; height: 20px;"></div>
              <div class="form-group col-md-1"></div>
            </div>
            <label style="font-size: 16px; font-weight: bold; margin-left:40%;margin-top: 10px;">
              Leave History
            </label>
            <div class="form-row col-md-12">
              <table style="width:98%; padding: 1%;" class="table table-striped table-hover">
                <thead>
                  <th>PROCESS</th>
                  <th>MOTIVE</th>
                  <th>START DATE</th>
                  <th>END DATE</th>
                  <th>STATUS</th>
                </thead>
                <tbody>
                  <tr *ngFor="let leave of leaves" class="selectable" (click)="selectLeave(leave)">
                    <td>{{leave.id_type}}</td>
                    <td>{{leave.motive}}</td>
                    <td>{{leave.start}}</td>
                    <td>{{leave.end}}</td>
                    <td>{{leave.status}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="form-row col-md-12">
              <div class="form-group col-md-2"></div>
              <div class="form-group col-md-8" style="border-bottom: solid 4px #e3f2fd; height: 20px;"></div>
              <div class="form-group col-md-2"></div>
            </div>
            <div class="form-row col-md-12" *ngIf="!vacationAdd || !editLeave">
              <div class="form-group col-md-4"></div>
              <div class="form-group col-md-2">
                <button class="form-control" (click)="setLeave()">Set</button>
              </div>
              <div class="form-group col-md-6"></div>
            </div>
          </div>
          <div class="form-group col-md-6" style="border-left: solid 4px #e3f2fd;" *ngIf="editLeave">
            <label style="margin-left:40%; font-weight: bold; font-size:16px;">Set Leave</label>
            <div class="form-row col-md-12">
              <div class="form-group col-md-2"></div>
              <div class="form-group col-md-8">
                <label>Category:</label>
                <select class="form-control" [(ngModel)]="activeLeave.motive" [disabled]="showLeave">
                  <option *ngFor="let motive of motives">{{motive}}</option>
                </select>
              </div>
              <div class="form-group col-md-2"></div>
            </div>
            <div class="form-row col-md-12">
              <div class="form-group col-md-4">
                <label>Start:</label>
                <input type="date" class="form-control" [(ngModel)]="activeLeave.start" [disabled]="showLeave">
              </div>
              <div class="form-group col-md-4">
                <label>End:</label>
                <input type="date" class="form-control" [(ngModel)]="activeLeave.end" [disabled]="showLeave">
              </div>
              <div class="form-group col-md-4">
                <label>Approved:</label>
                <select class="form-control" [(ngModel)]="activeLeave.approved_by" [disabled]="showLeave">
                  <option *ngFor="let app of approvals" [value]="app.iduser">{{app.user_name}}
                  </option>
                </select>
              </div>
            </div>
            <div class="form-row col-md-12">
              <div class="form-group col-md-12">
                <label>Notes:</label>
                <textarea class="form-control" width="100%" [(ngModel)]="activeLeave.notes"
                    [disabled]="showLeave"></textarea>
              </div>
            </div>
            <div class="form-row col-md-12">
              <div class="form-group col-md-4">
                <label>User:</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="user.user_name" (value)="user.idusers">
              </div>
              <div class="form-group col-md-4">
                <label>Date:</label>
                <input type="text" [disabled]="true" class="form-control" [(ngModel)]="activeLeave.date">
              </div>
              <div class="form-group col-md-4">
                <label>Status:</label>
                <input type="text" class="form-control" [(ngModel)]="activeLeave.status" [disabled]="true">
              </div>
            </div>
            <div class="form-row col-md-12" *ngIf="leaveDates.length>0 && activeLeave.status=='PENDING'">
              <div class="form-group col-md-4 d-flex flex-column">
                <div class="form-row mb-auto align-top">
                  <button class="form-control" (click)="saveActionLeaves()">
                    Save
                  </button>
                </div>
                <div class="form-row align-buttom">
                  <button class="form-control" (click)="cancelView()" *ngIf="showLeave">
                    Return
                  </button>
                </div>
              </div>
              <div class="form-group col-md-8">
                <table>
                  <tr>
                    <td style="padding: 0 50px;">
                      <b>
                        Date
                      </b>
                    </td>
                    <td style="padding: 0 50px 0 50px;">
                      <b>
                        Action
                      </b>
                    </td>
                  </tr>
                  <tr *ngFor="let ld of leaveDates">
                      <td style="padding: 0 50px;">
                        {{ ld.dates }}
                      </td>
                      <td>
                        <select [(ngModel)]="ld.action" class="form-control">
                          <option value="PENDING" >APPLY</option>
                          <option>DISMISSED</option>
                        </select>
                      </td>
                  </tr>
                </table>
              </div>
            </div>
            <div class="form-row col-md-12">
              <div class="form-group col-md-2">
                <button class="form-control" (click)="cancelView()" *ngIf="editLeave && !showLeave">Cancel</button>
              </div>
              <div class="form-group col-md-8">
              </div>
              <div class="form-group col-md-2">
                <button class="form-control" (click)="insertLeave()" *ngIf="editLeave && !showLeave">Accept</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Vacations -->
      <div class="tab-pane fade" id="nav-vac" role="tabpanel" aria-labelledby="nav-vac-tab">
        <div class="form-row col-md-12">
          <div class="form-group col-md-12" style="border-left: solid 4px #e3f2fd;">
            <div class="form-group col-md-6">
              <label style="font-size: 16px; font-weight: bold; margin-left:40%;margin-top: 10px;">
                Vacations
              </label>
              <div class="form-row col-md-12">
                <div class="form-group col-md-1"></div>
                <div class="form-group col-md-2">
                  <label>Earned:</label>
                  <input type="text" class="form-control" [(ngModel)]="earnVacations" [disabled]="true">
                </div>
                <div class="form-group col-md-2">
                  <label>Took:</label>
                  <input type="text" class="form-control" [(ngModel)]="tookVacations" [disabled]="true">
                </div>
                <div class="form-group col-md-2">
                  <label>Available:</label>
                  <input type="text" class="form-control" [disabled]="true" [(ngModel)]="availableVacations">
                </div>
                <div class="form-grop col-md-2">
                  <label>Dismissed:</label>
                  <input type="text" class="form-control" [disabled]="true" [(ngModel)]="dismissedVacations">
                </div>
                <div class="form-group col-md-2">
                  <label>Returned:</label>
                  <input type="text" class="form-control" [disabled]="true" [(ngModel)]="returnedVacations">
                </div>
                <div class="form-group col-md-1"></div>
              </div>
              <div class="form-row col-md-12">
                <table style="width:98%; padding: 1%;" class="table">
                  <tbody *ngFor="let v of vac">
                    <tr style="height: 30px; font-weight: bold;" class="tr-hover" (click)="v.vacSelected(!v.selected)">
                      <td style="align-items: center; text-align: center;">
                        <i class="far fa-plus-square" *ngIf="v.selected==false" ([ngModel])="v"></i>
                        <i class="far fa-minus-square" *ngIf="v.selected==true" ([ngModel])="v"></i>
                        Year: {{ v.year }}
                      </td>
                    </tr>
                    <tr *ngIf="v.selected==true" class="tr-nohover">
                      <td>
                        <table style="width:98%; padding: 1%;" class="table table-striped table-hover">
                          <thead>
                            <th>PROCESS</th>
                            <th>ACTION</th>
                            <th>COUNT</th>
                            <th>DATE</th>
                            <th>STATUS</th>
                          </thead>
                          <tbody>
                            <tr *ngFor="let vacation of v.vacations"
                              (click)="getVacation(vacation)" class="selectable">
                              <td>{{vacation.id_type}}</td>
                              <td>{{vacation.action}}</td>
                              <td>{{vacation.count}}</td>
                              <td *ngIf="v.year==vacation.year">{{vacation.took_date}}
                              </td>
                              <td *ngIf="v.year==vacation.year">{{vacation.status}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="form-row col-md-12">
                <div class="form-group col-md-2"></div>
                <div class="form-group col-md-8" style="border-bottom: solid 4px #e3f2fd; height: 20px;"></div>
                <div class="form-group col-md-2"></div>
              </div>
              <div class="form-row col-md-12" *ngIf="!vacationAdd">
                <div class="form-group col-md-1"></div>
                <div class="form-group col-md-3">
                  <!--<button class="form-control" (click)="addVacation('Add', '3')">Add</button>-->
                </div>
                <div class="form-group col-md-4"></div>
                <div class="form-group col-md-3">
                  <button class="form-control" (click)="addVacation('Take', '4')" *ngIf="availableVacations > 0">
                    Take
                  </button>
                  <button [disabled]="true" class="form-control" (click)="addVacation('Take', '4')" *ngIf="availableVacations === 0">
                    Take
                  </button>
                </div>
                <div class="form-group col-md-1"></div>
              </div>
            </div>
            <div class="form-group col-sm-6" style="border-left: solid 4px #e3f2fd;" *ngIf="vacationAdd && !editLeave">
              <div class="form-row col-md-12">
                <div class="form-group col-md-2"></div>
                <div class="form-group col-md-8">
                  <label>Date:</label>
                  <input type="date" class="form-control"
                    (change)="pushVacationDate($event.target.value)" *ngIf="editVac">
                  <input type="text" class="form-control" [(ngModel)]="activeVacation.took_date" *ngIf="!editVac" disabled="true">
                </div>
                <div class="form-group col-md-2"></div>
              </div>
              <div class="form-row col-md-12">
                <div class="form-group col-md-12">
                  <label>Notes:</label>
                  <textarea class="form-control" width="100%" [disabled]="!editVac" [(ngModel)]="activeVacation.notes"></textarea>
                </div>
              </div>
              <div class="form-row col-md-12">
                <div class="form-group col-md-3">
                  <label>Date:</label>
                  <input type="text" class="form-control" disabled="true"
                    [(ngModel)]="activeVacation.date">
                </div>
                <div class="form-group col-md-3">
                  <label>Days:</label>
                  <select class="form-control" [(ngModel)]="activeVacation.count"
                    [disabled]="!editVac">
                    <option>1</option>
                    <option>0.5</option>
                  </select>
                </div>
                <div class="form-group col-md-3">
                  <label>Status:</label>
                  <input type="text" class="form-control" [(ngModel)]="activeVacation.status" [disabled]="true">
                </div>
                <div class="form-group col-md-3">
                  <label>User:</label>
                  <input type="text" class="form-control" disabled="true" [(ngModel)]="user.username" (value)="user.idusers">
                </div>
              </div>
              <div class="form-row col-md-12">
                <div class="form-group col-md-2">
                  <button class="form-control" (click)="cancelVacation()" *ngIf="editVac">
                    Cancel
                  </button>
                </div>
                <div class="form-group col-md-8">
                  <button class="form-control" (click)="cancelView()" *ngIf="!editVac">
                    Return
                  </button>
                </div>
                <div class="form-group col-md-2">
                  <button class="form-control" (click)="insertVacation()" *ngIf="editVac">
                    Accept
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Justifications -->
      <div class="tab-pane fade" id="nav-justifications" role="tabpanel" aria-labelledby="nav-justifications-tab">
        <div class="form-row col-md-12">
          <label style="margin-left:45%; font-size: 16px; font-weight: bold;">Justifications</label>
        </div>
        <div class="form-row col-md-12">
          <div class="form-group col-md-2"></div>
          <div class="form-group col-md-4">
            <label>Date:</label>
            <input type="date" class="form-control" (change)="getAttendences($event.target.value)" [value]="todayDate">
          </div>
          <div class="form-group col-md-2"></div>
          <div class="form-group col-md-2">
            <button type="button" class="btn btn-outline-secondary"
              style="height: 1.5em; padding-top: 0rem; margin-top: 40px;" data-toggle="modal"
              data-target="#advanceModal" (click)="addJustification()"
              data-placement="top" title="Add Justification">
              <i class="fas fa-exchange-alt"></i>
            </button>
          </div>
        </div>
        <div class="form-row col-md-12">
          <div class="form-row col-md-12">
            <table style="width:98%; padding: 1%;" class="table table-striped table-hover">
              <thead>
                <th>DATE</th>
                <th>USER</th>
                <th>Status</th>
                <th>AMOUNT</th>
              </thead>
              <tbody>
                <tr style="cursor:pointer" *ngFor="let adj of showAttAdjustments"
                  (click)="getRecordAdjustment(adj.id_justification)" class="selectable">
                  <td>{{adj.date}}</td>
                  <td>{{adj.id_user}}</td>
                  <td>{{adj.state}}</td>
                  <td>{{adj.amount}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="form-row col-md-11 d-flex justify-content-between mt-2">
          <div class="form-col col-md-9 justify-self-center">

          </div>
          <div class="form-row col-md-2 gap-2 d-md-flex justify-content-md-end">
            <button class="btn btn-link"  (click)="getAttAllAdjustemt()" *ngIf="showAttAdjustments.length<=16">
              Show More
            </button>
            <button class="btn btn-link"  (click)="getAttAdjustemt()" *ngIf="showAttAdjustments.length>16">
              Show Less
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="advanceModal" tabindex="-1" role="dialog" aria-labelledby="advanceModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header d-flex justify-content-between mt-2">
        <div class="form-col justify-self-center">
          <h5 class="modal-title justify-content-center" id="advanceModalLabel" style="text-align: center;">
            Paperwork Reception
          </h5>
        </div>
        <div class="form-col justify-self-right">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>
      <div class="modal-body">
        <div class="form-group col-md-12" *ngIf="addJ">
          <div class="form-row col-md-12">
            <label>Reason:</label>
              <select class="form-control" [(ngModel)]="attAdjudjment.reason" [disabled]="editAdj">
                <option>IGSS</option>
                <option>Private Doctor</option>
                <option>Marriage Certificate</option>
                <option>Death Certificate</option>
                <option>Birth Certificate</option>
                <option *ngIf="attAdjudjment.reason === 'WFM Correction'">
                  WFM Correction
                </option>
                <option *ngIf="attAdjudjment.reason === 'Supervisor Exception'">
                  Supervisor Exception
                </option>
              </select>
          </div>
          <div class="form-row col-md-12">
            <div class="form-group col-md-6">
              <label>Date:</label>
              <input type="date" [(ngModel)]="attAdjudjment.attendance_date" class="form-control">
            </div>
            <div class="form-group col-md-3">
              <label>Before:</label>
              <input type="text" [disabled]="true" [(ngModel)]="attAdjudjment.time_before" class="form-control"
                [disabled]="editAdj">
            </div>
            <div class="form-group col-md-3">
              <label>After:</label>
              <input type="text" [(ngModel)]="attAdjudjment.time_after" class="form-control" [disabled]="true">
            </div>
          </div>
          <div class="form-row col-md-12">
            <div class="form-group col-md-4" *ngIf="!editAdj">
              <label>Start:</label>
              <input type="time" class="form-control" [(ngModel)]="attAdjudjment.start" (change)="change_time($event)">
            </div>
            <div class="form-group col-md-4" *ngIf="!editAdj">
              <label>End:</label>
              <input type="time" class="form-control" [(ngModel)]="attAdjudjment.end" (change)="change_time($event)">
            </div>
            <div class="form-group col-md-4">
              <label>Value:</label>
              <input type="text" class="form-control" [(ngModel)]="attAdjudjment.amount" [disabled]="true">
            </div>
          </div>
          <div class="form-row col-md-12">
            <div class="form-group col-md-12">
              <label>Notes:</label>
              <textarea class="form-control" width="100%" [(ngModel)]="attAdjudjment.notes" #message='ngModel'
                [disabled]="editAdj"></textarea>
            </div>
          </div>
          <div class="form-row col-md-12">
            <div class="form-group col-md-4">
              <label>User:</label>
              <input type="text" [disabled]="true" [(ngModel)]="user.user_name" class="form-control" *ngIf="!editAdj">
              <input type="text" [disabled]="true" [(ngModel)]="user.idusers" class="form-control" *ngIf="editAdj">
            </div>
            <div class="form-group col-md-4">
              <label>Date:</label>
              <input type="text" [disabled]="true" [(ngModel)]="attAdjudjment.date" class="form-control">
            </div>
            <div class="form-group col-md-4">
              <label>Status:</label>
              <input type="text" [disabled]="true" [(ngModel)]="attAdjudjment.state" class="form-control">
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button (click)="cancelAdjustment()" class="form-control" data-dismiss="modal" >Cancel</button>
        <button (click)="insertAdjustment()" class="form-control" data-dismiss="modal" >Accept</button>
      </div>
    </div>
  </div>
</div>
